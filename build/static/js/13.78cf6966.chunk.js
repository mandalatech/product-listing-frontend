(this["webpackJsonpproduct-listing-frontend"]=this["webpackJsonpproduct-listing-frontend"]||[]).push([[13],{660:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(181);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,c=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(o){c=!0,s=o}finally{try{n||null==i.return||i.return()}finally{if(c)throw s}}return r}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},661:function(e,t,r){"use strict";t.a=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},662:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,c=function(e,t){if(null==e)return{};var r,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(c[r]=e[r]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}r.d(t,"a",(function(){return n}))},663:function(e,t,r){"use strict";r(2);var n=r(659),c=r(666),s=r(26),a=function(e){var t=e.name,r=e.label,a=e.placeholder,i=e.require,o=e.labelTag,l=e.type,u=e.onChange,d=e.value,j=e.error,b=e.disabled,O=e.helpText,f=e.secondaryLabel,p=e.secondaryLabelClick,m=e.onBlur,h=e.plaintext;return Object(s.jsxs)(n.v,{className:"mb-4",children:[Object(s.jsxs)(n.J,{htmlFor:t,children:[r," ",o?Object(s.jsx)("small",{children:Object(s.jsx)("code",{children:o})}):null]}),Object(s.jsx)("span",{className:"font-weight-bold text-secondary",style:{float:"right",cursor:"pointer"},onClick:function(){p()},children:f}),Object(s.jsx)(n.D,{type:l,id:t,name:t,onChange:u,value:d,placeholder:a,required:!!i,disabled:b,onBlur:m,plaintext:h}),Object(s.jsx)("p",{className:"small",children:O}),Object(s.jsx)(c.a,{children:j})]})};a.defaultProps={name:"Name",label:"Label",placeholder:"Placeholder here",require:!1,labelTag:!1,disabled:!1,helpText:"",plaintext:!1},t.a=a},666:function(e,t,r){"use strict";r(2);var n=r(659),c=r(661),s=r(26);t.a=function(e){return Object(c.a)(e.children)?Object(s.jsx)("span",{}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(n.u,{children:Object(s.jsx)(n.w,{color:"red",style:{color:"red"},children:e.children})})})}},668:function(e,t,r){"use strict";var n=r(660),c=r(662),s=r(659),a=r(2),i=r(26),o=function(e){var t=e.title,r=e.showModal,o=e.onClose,l=e.size,u=Object(c.a)(e,["title","showModal","onClose","size"]),d=Object(a.useState)(!1),j=Object(n.a)(d,2),b=j[0],O=j[1];return Object(a.useEffect)((function(){O(!0)}),[r]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(s.L,{show:b,onClose:function(){return o(!1)},size:l,children:[Object(i.jsx)(s.N,{closeButton:!0,children:Object(i.jsx)(s.O,{children:t})}),Object(i.jsx)(s.M,{children:u.children})]})})};o.defaultProps={size:"lg"},t.a=o},670:function(e,t,r){"use strict";t.a=r.p+"static/media/view.ba2eff2b.svg"},671:function(e,t,r){"use strict";t.a=r.p+"static/media/edit.a2e87322.svg"},672:function(e,t,r){"use strict";t.a=r.p+"static/media/trash.f88bd880.svg"},678:function(e,t,r){"use strict";t.a=r.p+"static/media/info.5733e5ae.svg"},682:function(e,t,r){"use strict";r(2);var n=r(26),c=function(e){var t={width:"100%",height:1,backgroundColor:"rgba(0,0,0,0.125)",marginBottom:e.marginBottom,marginTop:e.marginTop};return Object(n.jsx)("div",{children:Object(n.jsx)("div",{style:t})})};c.defaultProps={marginBottom:"1.75rem",marginTop:"1.75rem"},t.a=c},695:function(e,t,r){"use strict";var n=r(839),c=r(665),s=r(659),a=r(2),i=r(96),o=r(678),l=r(74),u=r(125),d=r(660),j=r(662),b=r(663),O=r(661),f=r(26),p=Object(i.b)((function(e){return{attributeLists:e.group.attributes,errors:e.group.errors}}),{setProductGroupAttributes:l.q})((function(e){var t=e.record,r=Object(j.a)(e,["record"]),n=Object(a.useState)(null),i=Object(d.a)(n,2),o=i[0],l=i[1],p=Object(a.useState)([]),m=Object(d.a)(p,2),h=m[0],x=m[1],g=Object(a.useState)(""),v=Object(d.a)(g,2),E=v[0],y=v[1],w=Object(a.useState)(""),k=Object(d.a)(w,2),P=k[0],G=k[1];return Object(a.useEffect)((function(){if(Object(O.a)(t.values))y("");else{var e=t.values.map((function(e){return e.value})).join(",");console.log("RECORD VALUES",e),y(e)}}),[]),Object(a.useEffect)((function(){if(r.errors&&r.errors.hasOwnProperty(t.id)){var e=r.errors[t.id];e&&e.name&&G(e.name)}}),[r.errors]),Object(a.useEffect)((function(){if(Object(O.a)(E))x([]);else{var e=E.split(",");x(e.map((function(e){return{value:e.trim()}})))}}),[E]),Object(a.useEffect)((function(){var e=r.attributeLists.findIndex((function(e){return e.id===t.id})),n=Object(u.a)(r.attributeLists),c={id:t.id,name:o,values:h};n[e]=c,r.setProductGroupAttributes(n)}),[o,h]),Object(f.jsxs)(s.T,{className:"d-flex align-items-center",children:[Object(f.jsx)(s.k,{md:"5",children:Object(f.jsx)(b.a,{label:"Attribute",placeholder:"Eg. Hard-disk",onChange:function(e){l(e.target.value)},value:t.name,error:P})}),Object(f.jsx)(s.k,{md:"6",children:Object(f.jsx)(b.a,{label:"Possible values",placeholder:"Eg. SSD, HDD",onChange:function(e){y(e.target.value)},value:E})}),Object(f.jsx)(s.k,{md:"1",children:Object(f.jsx)(s.d,{onClick:function(){r.setProductGroupAttributes(r.attributeLists.filter((function(e){return e.id!==t.id})))},children:Object(f.jsx)(c.a,{className:"text-danger",name:"cil-x-circle"})})})]})}));t.a=Object(i.b)((function(e){return{attributeLists:e.group.attributes}}),{setProductGroupAttributes:l.q})((function(e){return Object(f.jsxs)("div",{children:[e.attributeLists.map((function(e){return Object(f.jsx)(p,{record:e})})),Object(f.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(f.jsx)("div",{children:Object(f.jsxs)(s.d,{className:"mb-0",style:{display:"flex",alignItems:"center"},onClick:function(){var t={id:Math.floor(1e8*Math.random()+1),name:null,values:[]};e.setProductGroupAttributes(e.attributeLists.concat(t))},children:[Object(f.jsx)("div",{style:{marginRight:14},children:Object(f.jsx)(c.b,{content:n.a.cilPlus,size:"lg"})}),"Add Attribute"]})}),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"d-flex align-items-center",style:{marginRight:"5rem"},children:[Object(f.jsx)("img",{src:o.a,alt:"Info",style:{paddingRight:"0.5rem"}}),Object(f.jsx)("span",{children:"Add multiple keyword seperated by \u201c,\u201d comma"})]})})]})]})}))},712:function(e,t,r){"use strict";var n=r(660),c=r(662),s=r(659),a=r(2),i=r(96),o=r(184),l=r(663),u=r(74),d=r(405),j=r(406),b=r(661),O=function(e){var t={};return e.attributes.forEach((function(e){var r={};Object(b.a)(e.name)&&(r.name="Please enter attribute name."),Object(b.a)(r)||(t[e.id]=r)})),Object(b.a)(e.name)&&(t.name="Please provide product group name"),t},f=r(695),p=r(26),m=function(e){var t=e.isModal,r=e._setShowCreateForm,i=Object(c.a)(e,["isModal","_setShowCreateForm"]),u=Object(a.useState)(!1),m=Object(n.a)(u,2),h=m[0],x=m[1],g=i.group,v=function(e){document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:27}))};Object(a.useEffect)((function(){i.clearProductGroupName(),i.clearProductGroupAttributes(),i.clearProductGroupError()}),[]);var E=(new AbortController).signal,y=function(e){g.attributes.map((function(e){var t,r="".concat(g.name," - ").concat(e.name),n=e.values;Object(b.a)(n)?t="text":(0===n.filter((function(e){return""!==e.value})).length&&(t="text"),t="enum");var c={datatype:t,name:r,description:g.name,display_order:1};return"enum"===t&&(c.enum_group={name:r,values:n}),c})).forEach((function(t){Object(o.c)(E,t).then((function(t){var r=t.json;if(t.response.ok){console.log("Product Attribute Created");var n=r.id;!function(e,t){var r={attributeset:e,field:t};Object(o.a)(E,r).then((function(e){var t=e.json;if(e.response.ok)console.log("Field is associated with group"),i.setProductGroupAttributes([]),i.setProductGroupName(""),x(!1),d.a.fire({icon:"success",title:Object(j.a)("success","Product Group created.")}),v(),Object(o.e)().then((function(e){var t=e.response,r=e.json;t.ok&&i.updateProductGroups(r)}));else for(var r in x(!1),t)Object.hasOwnProperty.call(t,r)&&d.a.fire({icon:"warning",title:Object(j.a)("warning",t[r])})})).catch((function(e){throw e}))}(e,n)}else for(var c in x(!1),r)Object.hasOwnProperty.call(r,c)&&d.a.fire({icon:"warning",title:Object(j.a)("warning",r[c])})})).catch((function(e){throw e}))}))},w=function(){var e=function(){if(!Object(b.a)(g.attributes))return{name:g.name};d.a.fire({icon:"warning",title:Object(j.a)("warning","At least one attribute is required.")})}();Object(b.a)(e)?x(!1):Object(o.b)(E,e).then((function(e){var t=e.json;if(e.response.ok){console.log("Product Group Created");var r=t.id;y(r)}else for(var n in x(!1),t)Object.hasOwnProperty.call(t,n)&&d.a.fire({icon:"warning",title:Object(j.a)("warning",t[n])})})).catch((function(e){throw e}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(s.e,{className:t?"px-3":"addpro-custom-card sm-pd mt-4",children:[t?null:Object(p.jsx)("h4",{className:"outside-card-title mb-4 p-2",children:"Add Group"}),Object(p.jsxs)(s.f,{children:[Object(p.jsx)(l.a,{name:"name",label:"Group name",placeholder:"Enter group name here",onChange:function(e){i.setProductGroupName(e.target.value)},value:i.group.name,error:i.group.errors.name&&i.group.errors.name}),Object(p.jsx)(f.a,{}),Object(p.jsxs)(s.T,{children:[Object(p.jsx)(s.k,{sm:"2",md:"2",children:Object(p.jsx)(s.d,{block:!0,variant:"outline",color:"dark",onClick:function(e){v(),r&&r(!1)},children:"Cancel"})}),Object(p.jsx)(s.k,{sm:"2",md:"2",children:Object(p.jsx)(s.d,{block:!0,color:"dark",onClick:function(){var e=O(g);i.setProductGroupError(e),Object(b.a)(e)&&(x(!0),w())},disabled:h,children:h?Object(p.jsx)(s.bb,{color:"secondary",size:"sm"}):"Save"})})]})]})]})})};m.defaultProps={isModal:!1};t.a=Object(i.b)((function(e){return{group:e.group}}),{setProductGroupName:u.s,updateProductGroups:u.A,setProductGroupAttributes:u.q,setProductGroupError:u.r,clearProductGroupError:u.h,clearProductGroupAttributes:u.g,clearProductGroupName:u.i})(m)},843:function(e,t,r){"use strict";r.r(t);var n=r(660),c=r(2),s=r(712),a=r(659),i=r(96),o=r(184),l=r(671),u=r(678),d=r(672),j=r(670),b=r(179),O=r(74),f=r(124),p=r(668),m=r(4),h=r.n(m),x=r(9),g=r(662),v=r(405),E=r(406),y=r(26),w=Object(i.b)(null,{updateProductGroups:O.A})((function(e){var t=e.item,r=Object(g.a)(e,["item"]),s=Object(c.useState)(Object(y.jsxs)("p",{children:["Are you sure want to delete ",Object(y.jsx)("strong",{children:t.name})," group ?"]})),i=Object(n.a)(s,2),l=i[0],u=i[1],d=Object.freeze({CANT_DELETE:"CANT_DELETE",NOT_DELETED:"NOT_DELETED",DELETING:"DELETING",DELETED:"DELETED"}),j=Object(c.useState)(d.NOT_DELETED),b=Object(n.a)(j,2),O=b[0],f=b[1],p=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,c=n.signal,f(d.DELETING),u(Object(y.jsxs)("p",{children:["Deleting ",Object(y.jsx)("strong",{children:t.name})," on progress"]})),console.log("[DELETE] PRODUCT GROUP: ",t),e.next=7,Object(o.d)(c,t.id).then((function(e){var r=e.json,n=e.response;console.log(r,n),n.ok?(f(d.DELETED),u(Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:t.name})," successfully deleted."]})),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:27})),v.a.fire({icon:"success",title:Object(E.a)("success","Group deleted.")})):(f(d.CANT_DELETE),u(Object(y.jsxs)("p",{children:[Object(y.jsx)("strong",{children:t.name})," group cant be deleted. The products are populated with this group."]})))}));case 7:Object(o.e)().then((function(e){var t=e.response,n=e.json;t.ok&&r.updateProductGroups(n)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"text-center",children:[l,O==d.DELETED||O==d.CANT_DELETE?null:Object(y.jsx)(a.d,{color:"danger",disabled:O==d.DELETING,onClick:function(){p(t)},children:O==d.DELETING?Object(y.jsx)(a.bb,{color:"secondary",size:"sm"}):O==d.NOT_DELETED?"Delete":null})]})})),k=r(663),P=r(661),G=function(e){var t=e.record,r=Object(c.useState)(!1),s=Object(n.a)(r,2),i=s[0],o=s[1],l=function(){var e;return"text"===t.datatype?e=[]:"enum"===t.datatype&&(e=t.enum_group.values),e};return Object(y.jsxs)(a.T,{className:"d-flex align-items-center",children:[Object(y.jsx)(a.k,{md:"4",children:Object(y.jsx)(k.a,{name:"attributeName",label:"Name",placeholder:"Attribute Name",value:t.description,plaintext:!i,disabled:!i})}),Object(y.jsx)(a.k,{md:"5",children:Object(y.jsx)(k.a,{name:"attributeName",label:"Possible Values",placeholder:Object(P.a)(l())?"Takes input from User":"Possible Values",plaintext:!i,disabled:!i,value:l().map((function(e){return e.value})).join(",")})}),Object(y.jsx)(a.k,{md:"2",children:Object(y.jsx)(a.d,{color:"dark",block:!0,onClick:function(e){o((function(e){return!e}))},variant:i?"":"outline",style:{borderRadius:"8%"},children:i?"Save Changes":"Edit"})})]})},N=Object(i.b)((function(e){return{attributes:e.group.existingAttributes}}),null)((function(e){var t=e.attributes;return Object(y.jsxs)("div",{className:"mt-5",children:[Object(y.jsx)("h5",{className:"mb-4",children:"Existing Attributes"}),t.map((function(e){return Object(y.jsx)(G,{record:e})}))]})})),T=r(682),C=r(695),A=function(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),r=t[0],s=t[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)(T.a,{}),Object(y.jsx)("div",{className:"d-flex justify-content-end",children:Object(y.jsx)(a.d,{onClick:function(e){s((function(e){return!e}))},draggable:!0,children:r?"Collapse \u2b06":"Expand \u2b07"})}),r?Object(y.jsxs)("div",{children:[Object(y.jsx)(C.a,{}),Object(y.jsxs)(a.T,{children:[Object(y.jsx)(a.k,{sm:"2",md:"2",children:Object(y.jsx)(a.d,{block:!0,variant:"outline",color:"dark",children:"Cancel"})}),Object(y.jsx)(a.k,{sm:"2",md:"2",children:Object(y.jsx)(a.d,{block:!0,color:"dark",children:"Save"})})]})]}):null]})},D=Object(i.b)((function(e){return{group:e.group}}),{setProductGroupName:O.s,updateProductGroups:O.A,setProductGroupAttributes:O.q,populateExistingGroupAttributes:O.k})((function(e){var t=e.edit,r=e.item,n=e.isModal,s=Object(g.a)(e,["edit","item","isModal"]);return Object(c.useEffect)((function(){t&&!Object(P.a)(r)&&(console.log("SELECTED ITEM",r),Object(P.a)(r.fields)||(s.populateExistingGroupAttributes(r.fields),s.setProductGroupName(r.name)))}),[r]),Object(y.jsx)("div",{children:Object(y.jsxs)(a.e,{className:n?"px-3":"addpro-custom-card sm-pd mt-4",children:[n?null:Object(y.jsx)("h4",{className:"outside-card-title mb-4 p-2",children:"Add Group"}),Object(y.jsxs)(a.f,{children:[Object(y.jsx)(k.a,{name:"name",label:"Group name",placeholder:"Enter group name here",value:s.group.name,disabled:!0,plaintext:!0}),Object(y.jsx)(N,{}),Object(y.jsx)(A,{})]})]})})})),L=Object(i.b)((function(e){return{groups:e.root.productGroups}}),{updateProductGroups:O.A,setLoader:f.a,clearProductGroupAttributes:O.g})((function(e){Object(c.useEffect)((function(){e.setLoader(!0),Object(o.e)().then((function(t){var r=t.response,n=t.json;r.ok&&e.updateProductGroups(n),e.setLoader(!1)}))}),[]);var t=Object(c.useState)(""),r=Object(n.a)(t,2),s=r[0],i=r[1],O=Object(c.useState)({}),f=Object(n.a)(O,2),m=f[0],h=f[1],x=Object(c.useState)(!1),g=Object(n.a)(x,2),v=g[0],E=g[1],k=function(e){return e.fields.length>0?Object(y.jsx)("span",{children:e.fields.map((function(e){return e.name})).join(", ")}):Object(y.jsx)("span",{className:"text-warning",children:"No attributes set yet. "})},P=function(e){return e.fields.length>0?e.fields.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"font-weight-bold",style:{width:"50%"},children:e.description}),"enum"===e.datatype?e.enum_group.values&&Object(y.jsx)("td",{children:e.enum_group.values.map((function(e){return e.value})).join(", ")}):Object(y.jsx)("td",{children:"Takes input from user."})]})})):Object(y.jsx)("span",{className:"text-warning",children:"Please set attributes first."})},G=function(t){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(a.d,{onClick:function(){e.clearProductGroupAttributes(),h(t),i(b.a.VIEW),E(!0)},title:"View Group",children:Object(y.jsx)("img",{src:j.a,alt:"View"})}),Object(y.jsx)(a.d,{onClick:function(){e.clearProductGroupAttributes(),h(t),i(b.a.EDIT),E(!0)},title:"Edit Group",children:Object(y.jsx)("img",{src:l.a,alt:"Edit"})}),Object(y.jsx)(a.d,{onClick:function(){h(t),i(b.a.DELETE),E(!0)},title:"Delete Group",children:Object(y.jsx)("img",{src:d.a,alt:"Delete"})})]})};return Object(y.jsx)(a.e,{children:Object(y.jsxs)(a.f,{style:{background:"white",borderRadius:"10px",padding:"2rem"},children:[v?Object(y.jsxs)(p.a,{showModal:v,title:"".concat(s," ").concat(m.name),onClose:E,size:"EDIT"===s?"xl":"lg",children:["DELETE"===s?Object(y.jsx)(w,{item:m}):null,"EDIT"===s?Object(y.jsx)(D,{item:m,isModal:!0,edit:!0}):null]}):null,Object(y.jsx)(a.n,{items:e.groups,fields:[{key:"id",_style:{width:"3%"},filter:!1},{label:"Product Group",key:"name",_style:{width:"20%"}},{key:"possibleValues",label:"Attributes & Possible values",_style:{width:"30%"}},{key:"action",_style:{width:"20%"},sorter:!1,filter:!1}],tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,sorter:!0,pagination:!0,scopedSlots:{attributes:function(e){return Object(y.jsx)("td",{children:k(e)})},possibleValues:function(e){return Object(y.jsx)("table",{style:{width:"100%"},className:"table",children:P(e)})},action:function(e){return Object(y.jsx)("td",{children:G(e)})}}}),Object(y.jsxs)("div",{className:"d-flex align-items-center",children:[Object(y.jsx)("img",{src:u.a,alt:"Info",style:{paddingRight:"0.5rem"}}),Object(y.jsx)("span",{children:"Editing and deleting are restricted if products are populated for those product groups."})]})]})})})),S=function(e){var t=e._setShowCreateForm;return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(y.jsx)("h4",{className:"outside-card-title mb-4 mr-auto",children:"Group"}),Object(y.jsx)(a.k,{md:"2",children:Object(y.jsx)(a.d,{block:!0,color:"warning",onClick:function(){t(!0)},children:Object(y.jsx)("span",{style:{color:"#fff",fontWeight:600},children:"+ \xa0Add Group"})})})]})})};t.default=function(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),r=t[0],a=t[1];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(S,{_setShowCreateForm:a}),r?Object(y.jsx)(s.a,{isModal:!1,_setShowCreateForm:a}):null,Object(y.jsx)("h4",{className:"mt-5 mb-3 font-weight-bold",children:"All Product Groups"}),Object(y.jsx)(L,{})]})}}}]);
//# sourceMappingURL=13.78cf6966.chunk.js.map