(this["webpackJsonpproduct-listing-frontend"]=this["webpackJsonpproduct-listing-frontend"]||[]).push([[15],{660:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(181);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,c=!1,l=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){c=!0,l=s}finally{try{r||null==a.return||a.return()}finally{if(c)throw l}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},661:function(e,t,n){"use strict";t.a=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}},662:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}n.d(t,"a",(function(){return r}))},663:function(e,t,n){"use strict";n(2);var r=n(659),c=n(666),l=n(26),o=function(e){var t=e.name,n=e.label,o=e.placeholder,a=e.require,s=e.labelTag,i=e.type,u=e.onChange,d=e.value,b=e.error,j=e.disabled,f=e.helpText,p=e.secondaryLabel,O=e.secondaryLabelClick,h=e.onBlur,m=e.plaintext;return Object(l.jsxs)(r.v,{className:"mb-4",children:[Object(l.jsxs)(r.J,{htmlFor:t,children:[n," ",s?Object(l.jsx)("small",{children:Object(l.jsx)("code",{children:s})}):null]}),Object(l.jsx)("span",{className:"font-weight-bold text-secondary",style:{float:"right",cursor:"pointer"},onClick:function(){O()},children:p}),Object(l.jsx)(r.D,{type:i,id:t,name:t,onChange:u,value:d,placeholder:o,required:!!a,disabled:j,onBlur:h,plaintext:m}),Object(l.jsx)("p",{className:"small",children:f}),Object(l.jsx)(c.a,{children:b})]})};o.defaultProps={name:"Name",label:"Label",placeholder:"Placeholder here",require:!1,labelTag:!1,disabled:!1,helpText:"",plaintext:!1},t.a=o},666:function(e,t,n){"use strict";n(2);var r=n(659),c=n(661),l=n(26);t.a=function(e){return Object(c.a)(e.children)?Object(l.jsx)("span",{}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(r.u,{children:Object(l.jsx)(r.w,{color:"red",style:{color:"red"},children:e.children})})})}},668:function(e,t,n){"use strict";var r=n(660),c=n(662),l=n(659),o=n(2),a=n(26),s=function(e){var t=e.title,n=e.showModal,s=e.onClose,i=e.size,u=Object(c.a)(e,["title","showModal","onClose","size"]),d=Object(o.useState)(!1),b=Object(r.a)(d,2),j=b[0],f=b[1];return Object(o.useEffect)((function(){f(!0)}),[n]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(l.L,{show:j,onClose:function(){return s(!1)},size:i,children:[Object(a.jsx)(l.N,{closeButton:!0,children:Object(a.jsx)(l.O,{children:t})}),Object(a.jsx)(l.M,{children:u.children})]})})};s.defaultProps={size:"lg"},t.a=s},670:function(e,t,n){"use strict";t.a=n.p+"static/media/view.ba2eff2b.svg"},671:function(e,t,n){"use strict";t.a=n.p+"static/media/edit.a2e87322.svg"},672:function(e,t,n){"use strict";t.a=n.p+"static/media/trash.f88bd880.svg"},678:function(e,t,n){"use strict";t.a=n.p+"static/media/info.5733e5ae.svg"},679:function(e,t,n){"use strict";n(2);var r=n(659),c=n(710),l=n(666),o=n(26),a=function(e){var t=e.name,n=e.label,a=e.options,s=(e.placeholder,e.onChange),i=e.secondaryLabel,u=e.secondaryLabelClick,d=e.error,b=e.value,j=e.selectValueByLabel,f=e.defaultValueByLabel,p=e.valueByLabel,O=e.defaultValue,h=a.map((function(e){return e.name&&(e.value=e.id,e.label=e.name),e}));console.log("Value by Label: ",p);var m=a.filter((function(e){return e.id===b}));return console.log("Value from checkbox : ",m),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(r.v,{children:[Object(o.jsx)(r.J,{htmlFor:t,children:n}),Object(o.jsx)("span",{className:"font-weight-bold text-secondary",style:{float:"right",cursor:"pointer"},onClick:function(){u()},children:i}),Object(o.jsx)(c.a,{name:t,defaultValue:j?a.filter((function(e){return e.label===f})):a.filter((function(e){return e.value===O})),onChange:s,options:h,placeholder:m.length>0&&m[0].name||"Select..",value:j?a.filter((function(e){return e.label===p})):a.filter((function(e){return e.value===b}))}),Object(o.jsx)(l.a,{children:d})]})})};a.defaultProps={name:"name",label:"Label",placeholder:"placeholder here...",options:[{id:0,name:"Apple",created:"2019-08-24T14:15:22Z",modified:"2019-08-24T14:15:22Z"},{id:1,name:"Banana",created:"2019-08-24T14:15:22Z",modified:"2019-08-24T14:15:22Z"},{id:2,name:"Cat",created:"2019-08-24T14:15:22Z",modified:"2019-08-24T14:15:22Z"}]},t.a=a},842:function(e,t,n){"use strict";n.r(t);var r=n(660),c=n(2),l=n(4),o=n.n(l),a=n(9),s=n(662),i=(n(665),n(659)),u=n(96),d=n(15),b=n(13),j=function(){var e=Object(a.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(d.b,"POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(a.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(d.b+"".concat(n,"/"),"DELETE",t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(d.b+"?paginate=false","GET",t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(d.b+"".concat(n,"/"),"PATCH",t,r);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAzCAYAAAD7JnqGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgB7ZnBrYMwEETXBg4gIYVOUgK/kvxOEleSpBNKSCdEQoIDIDIbkSjXvYAP8yQjbDg8zfo2Tlbatq2TJDkvy3LE9iAb45xr5nm+V1V1e+/10XXdeZqmS9/3go8COdmaLMskz3NJ0/RSlmVwSOof51fI7SL0C1ITSOnrn8f4TsMw7C6lqINOTa+Ux6Yex1FiYb1KRy+RsU7uEJ3YB4pZoZgVilmhmBWKWaGYFYpZoZgVilmhmBWKWaGYFYpZoZgVilmhmBWKWaGYFYpZiVrsqR1ObHhIPdDdSCxoC4d2pPHobkJRFBJDauqg1SDE7h7FZYOzoHWc2u4lhJ7yUwkGLVO/MWlviR9OWLVszxMpPbDCGpS8APZoYKSbfeFtAAAAAElFTkSuQmCC",m=n(679),x=n(663),y=n(73),v=function(e){return function(t){t({type:y.d,payload:e})}},g=n(666),E=n(405),w=n(406),T=n(661),k=function(e){var t={};return Object(T.a)(e.productOne)&&(t.productOne="First item of bundle cant be empty."),Object(T.a)(e.productTwo)&&(t.productTwo="Second item of bundle cant be empty."),Object(T.a)(e.bundleQuantity)&&(t.bundleQuantity="Bundle Quantity cant be left empty."),Object(T.a)(e.productOne)||Object(T.a)(e.productTwo)||e.productOne!==e.productTwo||(t.sameProductOnBundle="Bundled elements are same."),{isValid:Object(T.a)(t),errors:t}},A=n(678),B=n(26),D=function(e){var t=e._setShowCreateForm,n=e.isModal,l=e.edit,u=e.item,d=Object(s.a)(e,["_setShowCreateForm","isModal","edit","item"]),b=Object(c.useState)(!1),f=Object(r.a)(b,2),y=f[0],v=f[1];Object(c.useEffect)((function(){d.clearBundleInput()}),[]);var D=function(e){return d.products&&d.products.filter((function(t){return t.id===e}))};Object(c.useEffect)((function(){l&&!Object(T.a)(u)&&(d.setBundleInput({productOne:u.product_one}),d.setBundleInput({productTwo:u.product_two}),d.setBundleInput({bundleQuantity:u.quantity}))}),[]);var C=Object.freeze({FIRST:"FIRST",SECOND:"SECOND"}),S=function(e){return Object(T.a)(e)?[]:e.map((function(e){return e.name=e.title,e}))},I=function(e,t){t==C.FIRST?d.setBundleInput({productOne:e.id}):t==C.SECOND&&d.setBundleInput({productTwo:e.id})},L=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n,r,c,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k(d.bundle),n=t.isValid,r=t.errors,d.setBundleInputError(r),!n){e.next=15;break}if(v(!0),c={product_one:d.bundle.productOne,product_two:d.bundle.productTwo,quantity:d.bundle.bundleQuantity},console.log("[PAYLOAD] for Bundle",c),a=new AbortController,s=a.signal,l){e.next=13;break}return e.next=11,j(s,c).then((function(e){var t=e.json;e.response.ok?(console.log("Request succesfully sent."),E.a.fire({icon:"success",title:Object(w.a)("success","Bundle created.")}),d.clearBundleInput(),v(!1),p().then((function(e){var t=e.response,n=e.json;t.ok&&d.updateBundles(n)}))):(v(!1),t.non_field_errors&&t.non_field_errors.forEach((function(e){E.a.fire({icon:"warning",title:Object(w.a)("warning",e)})})))}));case 11:e.next=15;break;case 13:return e.next=15,O(s,u.id,c).then((function(e){var t=e.json;e.response.ok?(console.log("Request succesfully sent."),E.a.fire({icon:"success",title:Object(w.a)("success","Bundle edited.")}),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:27})),d.clearBundleInput(),v(!1),p().then((function(e){var t=e.response,n=e.json;t.ok&&d.updateBundles(n)}))):(v(!1),t.non_field_errors&&t.non_field_errors.forEach((function(e){E.a.fire({icon:"warning",title:Object(w.a)("warning",e)})})))}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(i.e,{className:"addpro-custom-card sm-pd",children:[n?null:Object(B.jsx)("h4",{className:"outside-card-title mb-4 p-2",children:"Add Bundle"}),Object(B.jsxs)(i.f,{children:[Object(B.jsxs)(i.T,{children:[Object(B.jsxs)(i.k,{children:[Object(B.jsx)(m.a,{name:"product1ForBundle",label:"Select item to create bundle for",placeholder:"Eg: Product Name",options:S(d.products),onChange:function(e){return I(e,C.FIRST)},value:d.bundle.productOne}),Object(B.jsx)(g.a,{children:d.error.productOne&&d.error.productOne}),Object(T.a)(d.bundle.productOne)?null:Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsx)("div",{children:Object(B.jsx)("img",{src:h,alt:"Polo Tshirt"})}),Object(B.jsx)("div",{style:{marginLeft:"1rem"}}),Object(B.jsxs)("div",{class:"d-flex flex-column justify-content-evenly align-items-start",children:[Object(B.jsx)("p",{className:"font-weight-bold",style:{margin:"0"},children:D(d.bundle.productOne)&&D(d.bundle.productOne)[0].title}),Object(B.jsx)("p",{style:{margin:"0"},children:"Available Inventory Stock = Unknown"})]})]})]}),Object(B.jsxs)(i.k,{children:[Object(B.jsx)(m.a,{name:"product2ForBundle",label:"Bundle With",placeholder:"Eg: Product Name",options:S(d.products),onChange:function(e){return I(e,C.SECOND)},value:d.bundle.productTwo}),Object(B.jsx)(g.a,{children:d.error.productTwo&&d.error.productTwo}),Object(T.a)(d.bundle.productTwo)?null:Object(B.jsxs)("div",{className:"d-flex",children:[Object(B.jsx)("div",{children:Object(B.jsx)("img",{src:h,alt:"Polo Tshirt"})}),Object(B.jsx)("div",{style:{marginLeft:"1rem"}}),Object(B.jsxs)("div",{class:"d-flex flex-column justify-content-evenly align-items-start",children:[Object(B.jsx)("p",{className:"font-weight-bold",style:{margin:"0"},children:D(d.bundle.productTwo)&&D(d.bundle.productTwo)[0].title}),Object(B.jsx)("p",{style:{margin:"0"},children:"Available Inventory Stock = Unknown"})]})]})]})]}),Object(B.jsx)(i.T,{className:"mt-2 mb-4",children:Object(B.jsx)(i.k,{children:Object(B.jsx)(g.a,{children:d.error.sameProductOnBundle&&d.error.sameProductOnBundle})})}),Object(B.jsx)(i.T,{children:Object(B.jsxs)(i.k,{children:[Object(B.jsx)(x.a,{type:"number",label:"Bundle Quantity",placeholder:"Enter quantity",name:"bundleQuantity",value:d.bundle.bundleQuantity,onChange:function(e){d.setBundleInput({bundleQuantity:e.target.value})},error:d.error.bundleQuantity&&d.error.bundleQuantity}),Object(B.jsxs)("div",{className:"d-flex align-items-center",children:[Object(B.jsx)("img",{src:A.a,alt:"Info",style:{paddingRight:"0.5rem"}}),Object(B.jsx)("span",{children:"Info related to quantity selection criteria here."})]})]})}),Object(B.jsxs)(i.T,{className:"mt-5",children:[Object(B.jsx)(i.k,{sm:"2",md:"2",children:Object(B.jsx)(i.d,{block:!0,variant:"outline",color:"dark",onClick:function(){t(!1)},children:"Cancel"})}),Object(B.jsx)(i.k,{sm:"2",md:"2",children:Object(B.jsx)(i.d,{block:!0,color:"dark",onClick:L,disabled:y,children:y?Object(B.jsx)(i.bb,{color:"secondary",size:"sm"}):"Save"})})]})]})]})})};D.defaultProps={isModal:!1,edit:!1,item:null};var C=Object(u.b)((function(e){return{products:e.root.products,bundle:e.bundle,error:e.bundle.error}}),{setBundleInput:function(e){return function(t){t({type:y.b,payload:e})}},setBundleInputError:function(e){return function(t){t({type:y.c,payload:e})}},clearBundleInput:function(){return function(e){e({type:y.a})}},updateBundles:v})(D),S=n(671),I=n(672),L=n(670),N=n(179),_=n(124),F=n(668),P=Object(u.b)(null,{updateBundles:v})((function(e){var t=e.item,n=Object(s.a)(e,["item"]),l=Object.freeze({NOT_DELETED:"NOT_DELETED",DELETING:"DELETING",DELETED:"DELETED"}),u=Object(c.useState)(l.NOT_DELETED),d=Object(r.a)(u,2),b=d[0],j=d[1],O=function(){var e=Object(a.a)(o.a.mark((function e(t){var r,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new AbortController,c=r.signal,j(l.DELETING),console.log("[DELETE] BUNDLE: ",t),e.next=6,f(c,t.id).then((function(e){e.json;e.response.ok&&(j(l.DELETED),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:27})),E.a.fire({icon:"success",title:Object(w.a)("success","Bundle deleted.")}))}));case 6:a=e.sent,j(l.DELETED),console.log(a),p().then((function(e){var t=e.response,r=e.json;console.log(t,r),t.ok&&n.updateBundles(r)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:"text-center",children:[b==l.DELETED?Object(B.jsx)("p",{children:"Bundle successfully deleted."}):Object(B.jsx)("p",{children:"Are you sure want to delete this bundle ?"}),b==l.DELETED?null:Object(B.jsx)(i.d,{color:"danger",disabled:b==l.DELETING,onClick:function(){O(t)},children:b==l.DELETING?Object(B.jsx)(i.bb,{color:"secondary",size:"sm"}):b==l.NOT_DELETED?"Delete":null})]})})),V=Object(u.b)((function(e){return{bundles:e.root.bundles,products:e.root.products}}),{updateBundles:v,setLoader:_.a})((function(e){Object(c.useEffect)((function(){e.setLoader(!0),p().then((function(t){var n=t.response,r=t.json;n.ok&&e.updateBundles(r),e.setLoader(!1)}))}),[]);var t=Object(c.useState)(""),n=Object(r.a)(t,2),l=n[0],o=n[1],a=Object(c.useState)({}),s=Object(r.a)(a,2),u=s[0],d=s[1],b=Object(c.useState)(!1),j=Object(r.a)(b,2),f=j[0],O=j[1],h=function(t){return e.products&&e.products.filter((function(e){return e.id===t}))},m=function(e){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(i.d,{onClick:function(){d(e),o(N.a.VIEW),O(!0)},title:"View Bundle",children:Object(B.jsx)("img",{src:L.a,alt:"View"})}),Object(B.jsx)(i.d,{onClick:function(){d(e),o(N.a.EDIT),O(!0)},title:"Edit Bundle",children:Object(B.jsx)("img",{src:S.a,alt:"Edit"})}),Object(B.jsx)(i.d,{onClick:function(){d(e),o(N.a.DELETE),O(!0)},title:"Delete Bundle",children:Object(B.jsx)("img",{src:I.a,alt:"Delete"})})]})};return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(i.e,{children:Object(B.jsxs)(i.f,{style:{background:"white",borderRadius:"10px",padding:"2rem"},children:[f?Object(B.jsxs)(F.a,{showModal:f,title:"".concat(l," ").concat(u.product_one," & ").concat(u.product_two),onClose:O,size:"EDIT"===l?"xl":"lg",children:["DELETE"===l?Object(B.jsx)(P,{item:u}):null,"EDIT"===l?Object(B.jsx)(C,{item:u,isModal:!0,edit:!0}):null]}):null,Object(B.jsx)(i.n,{items:e.bundles,fields:[{key:"id",_style:{width:"3%"},label:"ID",filter:!1},{key:"product_one",_style:{width:"30%"},label:"Item One",filter:!1},{key:"product_two",_style:{width:"40%"},label:"Item Two",filter:!1},{key:"quantity",label:"Quantity",_style:{width:"5%"},filter:!1},{key:"action",_style:{width:"20%"},sorter:!1,filter:!1}],columnFilter:!0,tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,sorter:!0,pagination:!0,scopedSlots:{id:function(e){return Object(B.jsx)("td",{children:e.id})},product_one:function(e){return Object(B.jsx)("td",{children:h(e.product_one)&&h(e.product_one)[0].title})},product_two:function(e){return Object(B.jsx)("td",{children:h(e.product_two)&&h(e.product_two)[0].title})},quantity:function(e){return Object(B.jsx)("td",{children:e.quantity})},action:function(e){return Object(B.jsx)("td",{children:m(e)})}}}),Object(B.jsxs)("div",{className:"d-flex align-items-center",children:[Object(B.jsx)("img",{src:A.a,alt:"Info",style:{paddingRight:"0.5rem"}}),Object(B.jsx)("span",{children:"Only products that are unique together gets accepted."})]})]})})})})),Y=function(e){var t=e._setShowCreateForm;return Object(B.jsx)("div",{children:Object(B.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(B.jsx)("h4",{className:"outside-card-title mb-4",children:"Bundle"}),Object(B.jsx)(i.k,{md:"2",children:Object(B.jsx)(i.d,{block:!0,color:"warning",onClick:function(){t(!0)},children:Object(B.jsx)("span",{style:{color:"#fff",fontWeight:600},children:"+ \xa0Add Bundle"})})})]})})};t.default=Object(u.b)(null,null)((function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),l=n[0],o=n[1];return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Y,{_setShowCreateForm:o}),l?Object(B.jsx)(C,{_setShowCreateForm:o}):null,Object(B.jsx)("h4",{className:"mt-5 mb-3 font-weight-bold",children:"All Bundles"}),Object(B.jsx)(V,{})]})}))}}]);
//# sourceMappingURL=15.8374b11c.chunk.js.map